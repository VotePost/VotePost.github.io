<!DOCTYPE html>
<html lang="en">
<head>
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <script type="text/javascript">
    google.charts.load('current', { packages: ['corechart'] });
    google.charts.setOnLoadCallback(drawChart);

    async function drawChart() {
      try {
        const response = await fetch('http://localhost:3000/api/poll-results');
        const chartData = await response.json();

        const data = google.visualization.arrayToDataTable(chartData);

        const options = {
          title: 'Poll Results',
          pieHole: 0.4, // For a donut chart, set this to >0
        };

        const chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);
      } catch (error) {
        console.error('Error loading poll data:', error);
      }
    }
  </script>
</head>
<body>
  <div id="chart_div" style="width: 600px; height: 400px;"></div>
</body>
</html>






<!--
<!DOCTYPE html>
<html>
<head>
<script src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.49.1/dist/umd/supabase.min.js"></script>
</head>
<body>

<script src="pollcreation.js"></script>

<div id="myChart" style="width:100%; max-width:600px; height:500px;"></div>
<script>
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

function drawChart() {
    // Set Data
    const data = google.visualization.arrayToDataTable([
        ['Colors', 'Mhl'],
        ['Blue', 54.8],
        ['Red', 48.6],
        ['Pink', 44.4],
        ['Purple', 23.9],
        ['Orange', 14.5]
    ]);

    // Set Options
        var options = {
        title: 'Favorite Colors',
        is3D: true,
        backgroundColor: 'rgb(118, 67, 151)', // Light grey background
        pieSliceText: 'percentage', // Display percentages on the pie slices
        chartArea: { 
            left: 20, 
            top: 50, 
            width: '90%', 
            height: '75%' 
        },
        legend: { position: 'right', alignment: 'center' }, // Show labels outside
        tooltip: { showColorCode: true }, // Enable tooltips with color codes
        slices: {
            0: { color: 'blue' },
            1: { color: 'red' },
            2: { color: 'pink' },
            3: { color: 'purple' },
            4: { color: 'orange', offset: 0 }
        }
    };
*/
    // Draw
    const chart = new google.visualization.PieChart(document.getElementById('myChart'));
    chart.draw(data, options);
}
</script>
-->
</body>
</html>
